<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Street Food Explorer - Login</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="login.css">

    <style>
        /* Popup Notifications at the Top */
        #successPopup,
        #errorPopup {
            position: fixed;
            top: -60px;
            /* hidden above screen initially */
            left: 50%;
            transform: translateX(-50%);
            width: auto;
            max-width: 400px;
            /* shorter width */
            font-size: 0.9rem;
            /* smaller text */
            padding: 6px 12px;
            /* less padding */
            border-radius: 6px;
            /* softer look */
            z-index: 1050;
            transition: top 0.5s ease-in-out;
        }

        #successPopup.show,
        #errorPopup.show {
            top: 15px;
            /* slide down into view */
        }
    </style>

</head>

<body class="d-flex align-items-center justify-content-center min-vh-100"
    style="background: url('Images/login.jpg') no-repeat center center/cover;">

    <!-- Success & Error Popups -->
    <div id="successPopup" class="alert alert-success text-center py-2">✅ Login successfully! Redirecting...</div>
    <div id="errorPopup" class="alert alert-danger text-center py-2">❌ Login failed. Please try again.</div>

    <!-- Login Card -->
    <div class="card shadow-lg border-0 login-card">
        <div class="card-body p-4">
            <h1 class="text-center mb-3 text-primary">Street Food Explorer</h1>
            <p class="text-center text-muted mb-4">
                Discover traditional and modern street foods across Malaysia.<br>
                Login to save your favourites and explore hidden gems!
            </p>

            <!-- Login Form -->
            <form id="loginForm">
                <div class="mb-3">
                    <label for="username" class="form-label fw-bold">Username</label>
                    <input type="text" id="username" class="form-control" required>
                </div>

                <div class="mb-3">
                    <label for="password" class="form-label fw-bold">Password</label>
                    <input type="password" id="password" class="form-control" required>
                </div>

                <button type="submit" class="btn btn-primary w-100">Login</button>
            </form>

            <p class="text-center mt-3">
                Don’t have an account?
                <a href="signup.html" class="fw-bold text-decoration-none text-primary">Sign Up</a>
            </p>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom Script -->
    <script>
        function setCookie(name, value, days) {
            const d = new Date();
            d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));
            document.cookie = `${name}=${value};expires=${d.toUTCString()};path=/`;
        }

        document.getElementById("loginForm").addEventListener("submit", function (e) {
            e.preventDefault();
            let username = document.getElementById("username").value.trim();
            let password = document.getElementById("password").value;

            let storedPassword = localStorage.getItem(username);
            const successPopup = document.getElementById("successPopup");
            const errorPopup = document.getElementById("errorPopup");

            // Hide both first
            successPopup.classList.remove("show");
            errorPopup.classList.remove("show");

            if (storedPassword === null) {
                errorPopup.textContent = "❌ Username does not exist. Please sign up first!";
                errorPopup.classList.add("show");
                setTimeout(() => errorPopup.classList.remove("show"), 2500);
                return;
            }

            if (storedPassword === password) {
                sessionStorage.setItem("username", username);
                setCookie("username", username, 7);

                successPopup.textContent = "✅ Login successful! Redirecting...";
                successPopup.classList.add("show");

                setTimeout(() => {
                    successPopup.classList.remove("show");
                    window.location.href = "gallery.html";
                }, 1500);
            } else {
                errorPopup.textContent = "❌ Incorrect password. Try again!";
                errorPopup.classList.add("show");
                setTimeout(() => errorPopup.classList.remove("show"), 2500);
            }
        });
    </script>
</body>


</html>
